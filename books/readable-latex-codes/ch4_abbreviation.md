---
title: "必要悪: 省略コマンド"
---

良いコマンドの作り方を論じた直後に話の腰を折るようだが, 悪いコマンドの作り方を紹介する.

"良いコマンド"だけで全てが足りれば幸せだが, 現実には複雑なコードの見た目をどうしても圧縮する必要があるなどの理由で, しょうもないコマンドをスポットで用いざるを得ない場合もある. そういう状況では, その目的専用と割り切った省略コマンドを定義して使おう. どんなコマンドかと言うと, 次のような, 省略したい表現への純粋なショートカットとして用いるコマンドを指す.

```tex
\newcommand{\xxCommand}[n]{省略したい複雑な表現}
```

省略コマンドはコメントで指す対象を宣言して使おう.

```tex
... &= \some \terms \frac{complex}{terms} \\
% 前の行の最後の分数のマクローリン展開の3次の項までを \xxMacExp{a}{x}{f} とおく
    &= \some \terms + \xxMacExp{a}{x}{f}
```

つまり, 板書とかでやる「この部分をAとおく」をコードでやってしまうわけだ.

省略のコマンドはそうでない通常コマンドと区別できるようにprefixを決めておくとよい. 上の例ではxxとした.

また, 省略のコマンドはその場で使い捨てて再利用しないこと, つまり, 影響範囲をソースコードの一部分に限定することが鉄則. 省略コマンド自体は可読性等に難のある"酷い"コマンドなので, 散在させて得なことなど何もない. 必要悪として瞬間的に利用せざるを得ない場面があるだけだ.

たとえば数学の文書における, 典型的な省略コマンドの使い所としては, 後の議論では必要ないが技術的議論の中で一時的に使う記号が挙げられる. たとえば, Riemann積分の亜種のXX積分を構成するときにしばしば出会う

$$\sum_k f(t^{(n)}_k) ( t^{(n)}_{k+1} - t^{(n)}_k )$$

```tex
\sum_k f(t^{(n)}_k) ( t^{(n)}_{k+1} - t^{(n)}_k )
```

のようなコードは, `\xxt{k}=`$t^{(n)}_k$ という風に省略コマンド `xxt` を定義すれば,

```tex
\sum_k f(\xxt{k}) ( \xxt{k+1} - \xxt{k} )
```

とだいぶマシな見た目になる. (上のコード例だけなら必要ないが, 加えて `\xxt[1]{k+1}=`$t^{(n+1)}_{k+1}$ となるようオプションを付けておくとこの続きの議論で役立つかもしれない.)

省略コマンドはあくまで最後の手段であり, これに頼る前に検討すべき相対的にマシな方法がいくつかある. 次の章では, そのような例を紹介する.
